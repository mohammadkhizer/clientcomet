(()=>{var e={};e.id=3827,e.ids=[3827],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7513:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\ByteBrusters\\\\bytebrusters\\\\src\\\\app\\\\admin\\\\dashboard\\\\inquiries\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\ByteBrusters\\bytebrusters\\src\\app\\admin\\dashboard\\inquiries\\page.tsx","default")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},46916:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>o,routeModule:()=>m,tree:()=>c});var t=r(65239),i=r(48088),a=r(88170),n=r.n(a),l=r(30893),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(s,d);let c={children:["",{children:["admin",{children:["dashboard",{children:["inquiries",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,7513)),"D:\\ByteBrusters\\bytebrusters\\src\\app\\admin\\dashboard\\inquiries\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,99111)),"D:\\ByteBrusters\\bytebrusters\\src\\app\\admin\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"D:\\ByteBrusters\\bytebrusters\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,o=["D:\\ByteBrusters\\bytebrusters\\src\\app\\admin\\dashboard\\inquiries\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/admin/dashboard/inquiries/page",pathname:"/admin/dashboard/inquiries",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},50686:(e,s,r)=>{Promise.resolve().then(r.bind(r,73999))},55414:(e,s,r)=>{Promise.resolve().then(r.bind(r,7513))},56037:e=>{"use strict";e.exports=require("mongoose")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73999:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>D});var t=r(60687),i=r(43210),a=r(29523),n=r(44493),l=r(6211),d=r(96834),c=r(11516),o=r(96847),u=r(69795),m=r(76311),x=r(18329),h=r(85866),p=r(57207),j=r(21342),v=r(63503),f=r(71453),g=r(29867),y=r(6475);let b=(0,y.createServerReference)("00bc4f7564fde94a50455acda65366056bb0f595ee",y.callServer,void 0,y.findSourceMapURL,"getServiceInquiries"),N=(0,y.createServerReference)("605687be82858f5df77276960ad12be340471ac1b0",y.callServer,void 0,y.findSourceMapURL,"updateServiceInquiryStatus"),w=(0,y.createServerReference)("4030c9246b4cbeecb6227fd70b65fce90b58820a33",y.callServer,void 0,y.findSourceMapURL,"deleteServiceInquiry");var q=r(43010),S=r(42692),A=r(34729),P=r(80013);let C=["New","Pending","Contacted","Resolved","Closed"];function D(){let[e,s]=(0,i.useState)([]),[r,y]=(0,i.useState)(!0),{toast:D}=(0,g.dj)(),[R,I]=(0,i.useState)(null),[_,B]=(0,i.useState)(!1),[E,$]=(0,i.useState)(!1),[k,M]=(0,i.useState)(""),[H,F]=(0,i.useState)(!1),[G,T]=(0,i.useState)(null);(0,i.useCallback)(async()=>{y(!0);try{let e=await b();s(e)}catch(e){console.error("Failed to fetch service inquiries:",e),D({title:"Error Loading Inquiries",description:e.message||"Failed to load inquiries.",variant:"destructive"})}finally{y(!1)}},[D]);let z=e=>{I(e),B(!0)},L=e=>{I(e),M(`Hi ${e.name},

Regarding your inquiry about "${e.serviceName}":

`),$(!0)},O=async()=>{if(R&&k.trim()){F(!0);try{if(await new Promise(e=>setTimeout(e,700)),"New"===R.status||"Pending"===R.status){let e=await N(R.id,"Contacted");e&&s(s=>s.map(s=>s.id===R.id?e:s))}D({title:"Reply 'Sent' (Simulated)",description:`Your reply to ${R.name} regarding "${R.serviceName}" has been simulated as sent.`}),$(!1),M(""),I(null)}catch(e){D({title:"Error Sending Reply",description:e.message||"Failed to simulate reply or update status.",variant:"destructive"})}finally{F(!1)}}},U=async(e,r)=>{T(e);try{let t=await N(e,r);t&&(s(s=>s.map(s=>s.id===e?t:s)),D({title:"Status Updated",description:`Inquiry status changed to ${r}.`}))}catch(e){D({title:"Error Updating Status",description:e.message,variant:"destructive"})}finally{T(null)}},V=async(e,r,t)=>{if(window.confirm(`Are you sure you want to delete the inquiry from "${r}" regarding "${t}"?`))try{await w(e),s(s=>s.filter(s=>s.id!==e)),D({title:"Inquiry Deleted",description:`Inquiry from "${r}" has been removed.`})}catch(e){D({title:"Error Deleting Inquiry",description:e.message,variant:"destructive"})}},Z=e=>{switch(e){case"New":return"destructive";case"Pending":return"secondary";case"Contacted":case"Resolved":return"default";default:return"outline"}};return r?(0,t.jsx)("div",{className:"flex justify-center items-center min-h-[calc(100vh-10rem)]",children:(0,t.jsx)(c.A,{className:"h-12 w-12 animate-spin text-primary"})}):(0,t.jsxs)(f.FadeIn,{children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl font-semibold text-foreground flex items-center",children:[(0,t.jsx)(o.A,{className:"mr-3 h-6 w-6 text-primary"})," Manage Service Inquiries"]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Review and manage inquiries submitted for specific services."})]})}),(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsx)(n.ZB,{children:"All Service Inquiries"}),(0,t.jsx)(n.BT,{children:"List of inquiries received through service pages."})]}),(0,t.jsx)(n.Wu,{children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(l.XI,{children:[(0,t.jsx)(l.A0,{children:(0,t.jsxs)(l.Hj,{children:[(0,t.jsx)(l.nd,{className:"min-w-[200px]",children:"Service Name"}),(0,t.jsx)(l.nd,{className:"min-w-[150px]",children:"Inquirer Name"}),(0,t.jsx)(l.nd,{className:"min-w-[200px]",children:"Email"}),(0,t.jsx)(l.nd,{className:"min-w-[120px]",children:"Date"}),(0,t.jsx)(l.nd,{children:"Status"}),(0,t.jsx)(l.nd,{className:"text-right min-w-[100px]",children:"Actions"})]})}),(0,t.jsxs)(l.BF,{children:[0===e.length&&!r&&(0,t.jsx)(l.Hj,{children:(0,t.jsx)(l.nA,{colSpan:6,className:"text-center text-muted-foreground py-8",children:"No service inquiries received yet."})}),e.map(e=>(0,t.jsxs)(l.Hj,{children:[(0,t.jsx)(l.nA,{className:"font-medium",children:e.serviceName}),(0,t.jsx)(l.nA,{children:e.name}),(0,t.jsx)(l.nA,{children:e.email}),(0,t.jsx)(l.nA,{children:e.createdAt?(0,q.GP)(new Date(e.createdAt),"PP p"):"N/A"}),(0,t.jsx)(l.nA,{children:(0,t.jsx)(d.E,{variant:Z(e.status),className:"capitalize",children:e.status})}),(0,t.jsx)(l.nA,{className:"text-right",children:(0,t.jsxs)(j.rI,{children:[(0,t.jsx)(j.ty,{asChild:!0,children:(0,t.jsxs)(a.$,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,t.jsx)("span",{className:"sr-only",children:"Open menu"}),G===e.id?(0,t.jsx)(c.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(u.A,{className:"h-4 w-4"})]})}),(0,t.jsxs)(j.SQ,{align:"end",children:[(0,t.jsx)(j.lp,{children:"Actions"}),(0,t.jsxs)(j._2,{onClick:()=>z(e),children:[(0,t.jsx)(m.A,{className:"mr-2 h-4 w-4"})," View Details"]}),(0,t.jsxs)(j._2,{onClick:()=>L(e),children:[(0,t.jsx)(x.A,{className:"mr-2 h-4 w-4"})," Reply (Simulated)"]}),(0,t.jsxs)(j.lv,{children:[(0,t.jsxs)(j.nV,{children:[(0,t.jsx)(h.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Change Status"})]}),(0,t.jsx)(j.dc,{children:(0,t.jsx)(j.M5,{children:(0,t.jsx)(j.Hr,{value:e.status,onValueChange:s=>U(e.id,s),children:C.map(e=>(0,t.jsx)(j.Ht,{value:e,className:"capitalize",children:e},e))})})})]}),(0,t.jsx)(j.mB,{}),(0,t.jsxs)(j._2,{onClick:()=>V(e.id,e.name,e.serviceName),className:"text-destructive focus:text-destructive focus:bg-destructive/10",children:[(0,t.jsx)(p.A,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},e.id))]})]})})})]})]}),R&&_&&(0,t.jsx)(v.Dialog,{open:_,onOpenChange:B,children:(0,t.jsxs)(v.DialogContent,{className:"sm:max-w-lg",children:[(0,t.jsxs)(v.DialogHeader,{children:[(0,t.jsxs)(v.DialogTitle,{children:["Inquiry from: ",R.name]}),(0,t.jsxs)(v.DialogDescription,{children:["Regarding Service: ",R.serviceName," ",(0,t.jsx)("br",{}),"Email: ",(0,t.jsx)("a",{href:`mailto:${R.email}`,className:"text-primary hover:underline",children:R.email}),R.phone&&` | Phone: ${R.phone}`," ",(0,t.jsx)("br",{}),"Date: ",R.createdAt?(0,q.GP)(new Date(R.createdAt),"PP p"):"N/A"," | Status: ",(0,t.jsx)(d.E,{variant:Z(R.status),className:"capitalize ml-1",children:R.status})]})]}),(0,t.jsxs)("div",{className:"py-4 space-y-2",children:[(0,t.jsx)("h4",{className:"font-medium text-muted-foreground",children:"Message:"}),(0,t.jsx)(S.F,{className:"h-40 w-full rounded-md border p-3 bg-muted/30",children:(0,t.jsx)("p",{className:"text-sm text-foreground whitespace-pre-wrap",children:R.message})})]}),(0,t.jsx)(v.Es,{children:(0,t.jsx)(v.HM,{asChild:!0,children:(0,t.jsx)(a.$,{type:"button",variant:"outline",children:"Close"})})})]})}),R&&E&&(0,t.jsx)(v.Dialog,{open:E,onOpenChange:e=>{e||($(!1),I(null),M(""))},children:(0,t.jsxs)(v.DialogContent,{className:"sm:max-w-2xl",children:[(0,t.jsxs)(v.DialogHeader,{children:[(0,t.jsxs)(v.DialogTitle,{children:["Reply to: ",R.name," (Inquiry for ",R.serviceName,")"]}),(0,t.jsxs)(v.DialogDescription,{children:["Email: ",(0,t.jsx)("a",{href:`mailto:${R.email}`,className:"text-primary hover:underline",children:R.email})]})]}),(0,t.jsxs)("div",{className:"py-4 space-y-4",children:[(0,t.jsxs)(n.Zp,{className:"bg-muted/50 max-h-40 overflow-y-auto",children:[(0,t.jsx)(n.aR,{className:"pb-2 sticky top-0 bg-muted/50 z-10",children:(0,t.jsx)(n.ZB,{className:"text-sm font-medium text-muted-foreground",children:"Original Inquiry Message:"})}),(0,t.jsx)(n.Wu,{children:(0,t.jsx)("p",{className:"text-sm text-foreground whitespace-pre-wrap",children:R.message})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(P.J,{htmlFor:"inquiryReplyText",className:"text-base font-medium flex items-center mb-2",children:[(0,t.jsx)(x.A,{className:"mr-2 h-5 w-5 text-primary"})," Your Reply:"]}),(0,t.jsx)(A.T,{id:"inquiryReplyText",value:k,onChange:e=>M(e.target.value),placeholder:`Replying to ${R.name}...`,className:"min-h-[150px] text-sm",disabled:H})]})]}),(0,t.jsxs)(v.Es,{className:"sm:justify-between items-center",children:[(0,t.jsx)(v.HM,{asChild:!0,children:(0,t.jsx)(a.$,{type:"button",variant:"outline",disabled:H,children:"Cancel"})}),(0,t.jsxs)(a.$,{type:"button",onClick:O,className:"button-primary",disabled:H||!k.trim(),children:[H?(0,t.jsx)(c.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Send Reply (Simulated)"]})]})]})})]})}},79551:e=>{"use strict";e.exports=require("url")},96834:(e,s,r)=>{"use strict";r.d(s,{E:()=>l});var t=r(60687);r(43210);var i=r(24224),a=r(4780);let n=(0,i.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:s,...r}){return(0,t.jsx)("div",{className:(0,a.cn)(n({variant:s}),e),...r})}}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[4447,8740,1658,1146,6134,5741,729,1564,8543,3751,6890,2378],()=>r(46916));module.exports=t})();