(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3773],{3503:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(157).A)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},4301:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(157).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},5695:(e,s,t)=>{"use strict";var r=t(8999);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})},6126:(e,s,t)=>{"use strict";t.d(s,{E:()=>l});var r=t(5155);t(2115);var a=t(2085),n=t(9434);let i=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:s,variant:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:t}),s),...a})}},8108:(e,s,t)=>{Promise.resolve().then(t.bind(t,8553))},8553:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>A});var r=t(5155),a=t(2115),n=t(285),i=t(6695),l=t(5127),c=t(6126),d=t(172),o=t(3503),u=t(4301),h=t(3561),x=t(8763),m=t(7223),f=t(6874),p=t.n(f),j=t(4838),y=t(8885),v=t(7481),b=t(4477);let g=(0,b.createServerReference)("005627f8b339aea1321130a10271c26847f47a65de",b.callServer,void 0,b.findSourceMapURL,"getChatbotRules"),w=(0,b.createServerReference)("40445d66ac3ffc8a00d949c79590a00f106ada0bd1",b.callServer,void 0,b.findSourceMapURL,"deleteChatbotRule");var N=t(5695);function A(){let[e,s]=(0,a.useState)([]),[t,f]=(0,a.useState)(!0),{toast:b}=(0,v.dj)(),A=(0,N.useRouter)(),k=(0,a.useCallback)(async()=>{f(!0);try{let e=await g();s(e)}catch(e){console.error("Failed to fetch chatbot rules:",e),b({title:"Error Loading Chatbot Rules",description:e.message||"Failed to load rules.",variant:"destructive"})}finally{f(!1)}},[b]);(0,a.useEffect)(()=>{k()},[k]);let R=async(e,t)=>{let r=t.join(", ").substring(0,50)+(t.join(", ").length>50?"...":"");if(window.confirm('Are you sure you want to delete the rule for keywords: "'.concat(r,'"?')))try{await w(e),s(s=>s.filter(s=>s.id!==e)),b({title:"Chatbot Rule Deleted",description:'Rule for "'.concat(r,'" has been removed.')})}catch(e){b({title:"Error Deleting Rule",description:e.message||"Failed to delete rule.",variant:"destructive"})}};return t?(0,r.jsx)("div",{className:"flex justify-center items-center min-h-[calc(100vh-10rem)]",children:(0,r.jsx)(d.A,{className:"h-12 w-12 animate-spin text-primary"})}):(0,r.jsx)(y.FadeIn,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl font-semibold text-foreground flex items-center",children:[(0,r.jsx)(o.A,{className:"mr-3 h-6 w-6 text-primary"})," Manage Chatbot Rules"]}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Define keywords and responses for the rule-based chatbot."})]}),(0,r.jsx)(p(),{href:"/admin/dashboard/chatbot/new",className:"w-full sm:w-auto",children:(0,r.jsxs)(n.$,{className:"button-primary w-full sm:w-auto",children:[(0,r.jsx)(u.A,{className:"mr-2 h-5 w-5"})," Add New Rule"]})})]}),(0,r.jsxs)(i.Zp,{children:[(0,r.jsxs)(i.aR,{children:[(0,r.jsx)(i.ZB,{children:"All Chatbot Rules"}),(0,r.jsx)(i.BT,{children:"List of rules that determine the chatbot's responses. Sorted by priority (lower number = higher priority)."})]}),(0,r.jsx)(i.Wu,{children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)(l.XI,{children:[(0,r.jsx)(l.A0,{children:(0,r.jsxs)(l.Hj,{children:[(0,r.jsx)(l.nd,{className:"min-w-[200px]",children:"Keywords"}),(0,r.jsx)(l.nd,{className:"min-w-[300px]",children:"Response (Snippet)"}),(0,r.jsx)(l.nd,{className:"min-w-[80px]",children:"Priority"}),(0,r.jsx)(l.nd,{className:"text-right min-w-[100px]",children:"Actions"})]})}),(0,r.jsxs)(l.BF,{children:[0===e.length&&!t&&(0,r.jsx)(l.Hj,{children:(0,r.jsx)(l.nA,{colSpan:4,className:"text-center text-muted-foreground py-8",children:"No chatbot rules found. Add your first rule!"})}),e.map(e=>(0,r.jsxs)(l.Hj,{children:[(0,r.jsx)(l.nA,{className:"font-medium",children:(0,r.jsx)("div",{className:"flex flex-wrap gap-1 max-w-md",children:e.keywords.map(e=>(0,r.jsx)(c.E,{variant:"secondary",children:e},e))})}),(0,r.jsx)(l.nA,{className:"text-sm text-muted-foreground",children:e.response.length>100?"".concat(e.response.substring(0,100),"..."):e.response}),(0,r.jsx)(l.nA,{children:e.priority}),(0,r.jsx)(l.nA,{className:"text-right",children:(0,r.jsxs)(j.rI,{children:[(0,r.jsx)(j.ty,{asChild:!0,children:(0,r.jsxs)(n.$,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,r.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,r.jsx)(h.A,{className:"h-4 w-4"})]})}),(0,r.jsxs)(j.SQ,{align:"end",children:[(0,r.jsx)(j.lp,{children:"Actions"}),(0,r.jsxs)(j._2,{onClick:()=>A.push("/admin/dashboard/chatbot/edit/".concat(e.id)),children:[(0,r.jsx)(x.A,{className:"mr-2 h-4 w-4"})," Edit"]}),(0,r.jsx)(j.mB,{}),(0,r.jsxs)(j._2,{onClick:()=>R(e.id,e.keywords),className:"text-destructive focus:text-destructive focus:bg-destructive/10",children:[(0,r.jsx)(m.A,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},e.id))]})]})})})]})]})})}},8763:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(157).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[4277,9086,9550,5152,6874,4204,4776,8441,1684,7358],()=>s(8108)),_N_E=e.O()}]);