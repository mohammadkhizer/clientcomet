(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3827],{277:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>q});var t=s(5155),r=s(2115),i=s(285),n=s(6695),l=s(5127),d=s(6126),c=s(172),o=s(1555),m=s(3561),u=s(7607),x=s(4063),h=s(3672),p=s(7223),f=s(4838),j=s(4165),g=s(8885),v=s(7481),y=s(4477);let N=(0,y.createServerReference)("00bc4f7564fde94a50455acda65366056bb0f595ee",y.callServer,void 0,y.findSourceMapURL,"getServiceInquiries"),b=(0,y.createServerReference)("605687be82858f5df77276960ad12be340471ac1b0",y.callServer,void 0,y.findSourceMapURL,"updateServiceInquiryStatus"),w=(0,y.createServerReference)("4030c9246b4cbeecb6227fd70b65fce90b58820a33",y.callServer,void 0,y.findSourceMapURL,"deleteServiceInquiry");var S=s(8184),A=s(6424),R=s(8539),D=s(5057);let C=["New","Pending","Contacted","Resolved","Closed"];function q(){let[e,a]=(0,r.useState)([]),[s,y]=(0,r.useState)(!0),{toast:q}=(0,v.dj)(),[k,E]=(0,r.useState)(null),[M,I]=(0,r.useState)(!1),[H,z]=(0,r.useState)(!1),[F,P]=(0,r.useState)(""),[T,L]=(0,r.useState)(!1),[V,_]=(0,r.useState)(null),O=(0,r.useCallback)(async()=>{y(!0);try{let e=await N();a(e)}catch(e){console.error("Failed to fetch service inquiries:",e),q({title:"Error Loading Inquiries",description:e.message||"Failed to load inquiries.",variant:"destructive"})}finally{y(!1)}},[q]);(0,r.useEffect)(()=>{O()},[O]);let U=e=>{E(e),I(!0)},B=e=>{E(e),P("Hi ".concat(e.name,',\n\nRegarding your inquiry about "').concat(e.serviceName,'":\n\n')),z(!0)},Z=async()=>{if(k&&F.trim()){L(!0);try{if(await new Promise(e=>setTimeout(e,700)),"New"===k.status||"Pending"===k.status){let e=await b(k.id,"Contacted");e&&a(a=>a.map(a=>a.id===k.id?e:a))}q({title:"Reply 'Sent' (Simulated)",description:"Your reply to ".concat(k.name,' regarding "').concat(k.serviceName,'" has been simulated as sent.')}),z(!1),P(""),E(null)}catch(e){q({title:"Error Sending Reply",description:e.message||"Failed to simulate reply or update status.",variant:"destructive"})}finally{L(!1)}}},J=async(e,s)=>{_(e);try{let t=await b(e,s);t&&(a(a=>a.map(a=>a.id===e?t:a)),q({title:"Status Updated",description:"Inquiry status changed to ".concat(s,".")}))}catch(e){q({title:"Error Updating Status",description:e.message,variant:"destructive"})}finally{_(null)}},Y=async(e,s,t)=>{if(window.confirm('Are you sure you want to delete the inquiry from "'.concat(s,'" regarding "').concat(t,'"?')))try{await w(e),a(a=>a.filter(a=>a.id!==e)),q({title:"Inquiry Deleted",description:'Inquiry from "'.concat(s,'" has been removed.')})}catch(e){q({title:"Error Deleting Inquiry",description:e.message,variant:"destructive"})}},$=e=>{switch(e){case"New":return"destructive";case"Pending":return"secondary";case"Contacted":case"Resolved":return"default";default:return"outline"}};return s?(0,t.jsx)("div",{className:"flex justify-center items-center min-h-[calc(100vh-10rem)]",children:(0,t.jsx)(c.A,{className:"h-12 w-12 animate-spin text-primary"})}):(0,t.jsxs)(g.FadeIn,{children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl font-semibold text-foreground flex items-center",children:[(0,t.jsx)(o.A,{className:"mr-3 h-6 w-6 text-primary"})," Manage Service Inquiries"]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Review and manage inquiries submitted for specific services."})]})}),(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsx)(n.ZB,{children:"All Service Inquiries"}),(0,t.jsx)(n.BT,{children:"List of inquiries received through service pages."})]}),(0,t.jsx)(n.Wu,{children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(l.XI,{children:[(0,t.jsx)(l.A0,{children:(0,t.jsxs)(l.Hj,{children:[(0,t.jsx)(l.nd,{className:"min-w-[200px]",children:"Service Name"}),(0,t.jsx)(l.nd,{className:"min-w-[150px]",children:"Inquirer Name"}),(0,t.jsx)(l.nd,{className:"min-w-[200px]",children:"Email"}),(0,t.jsx)(l.nd,{className:"min-w-[120px]",children:"Date"}),(0,t.jsx)(l.nd,{children:"Status"}),(0,t.jsx)(l.nd,{className:"text-right min-w-[100px]",children:"Actions"})]})}),(0,t.jsxs)(l.BF,{children:[0===e.length&&!s&&(0,t.jsx)(l.Hj,{children:(0,t.jsx)(l.nA,{colSpan:6,className:"text-center text-muted-foreground py-8",children:"No service inquiries received yet."})}),e.map(e=>(0,t.jsxs)(l.Hj,{children:[(0,t.jsx)(l.nA,{className:"font-medium",children:e.serviceName}),(0,t.jsx)(l.nA,{children:e.name}),(0,t.jsx)(l.nA,{children:e.email}),(0,t.jsx)(l.nA,{children:e.createdAt?(0,S.GP)(new Date(e.createdAt),"PP p"):"N/A"}),(0,t.jsx)(l.nA,{children:(0,t.jsx)(d.E,{variant:$(e.status),className:"capitalize",children:e.status})}),(0,t.jsx)(l.nA,{className:"text-right",children:(0,t.jsxs)(f.rI,{children:[(0,t.jsx)(f.ty,{asChild:!0,children:(0,t.jsxs)(i.$,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,t.jsx)("span",{className:"sr-only",children:"Open menu"}),V===e.id?(0,t.jsx)(c.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(m.A,{className:"h-4 w-4"})]})}),(0,t.jsxs)(f.SQ,{align:"end",children:[(0,t.jsx)(f.lp,{children:"Actions"}),(0,t.jsxs)(f._2,{onClick:()=>U(e),children:[(0,t.jsx)(u.A,{className:"mr-2 h-4 w-4"})," View Details"]}),(0,t.jsxs)(f._2,{onClick:()=>B(e),children:[(0,t.jsx)(x.A,{className:"mr-2 h-4 w-4"})," Reply (Simulated)"]}),(0,t.jsxs)(f.lv,{children:[(0,t.jsxs)(f.nV,{children:[(0,t.jsx)(h.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Change Status"})]}),(0,t.jsx)(f.dc,{children:(0,t.jsx)(f.M5,{children:(0,t.jsx)(f.Hr,{value:e.status,onValueChange:a=>J(e.id,a),children:C.map(e=>(0,t.jsx)(f.Ht,{value:e,className:"capitalize",children:e},e))})})})]}),(0,t.jsx)(f.mB,{}),(0,t.jsxs)(f._2,{onClick:()=>Y(e.id,e.name,e.serviceName),className:"text-destructive focus:text-destructive focus:bg-destructive/10",children:[(0,t.jsx)(p.A,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},e.id))]})]})})})]})]}),k&&M&&(0,t.jsx)(j.Dialog,{open:M,onOpenChange:I,children:(0,t.jsxs)(j.DialogContent,{className:"sm:max-w-lg",children:[(0,t.jsxs)(j.DialogHeader,{children:[(0,t.jsxs)(j.DialogTitle,{children:["Inquiry from: ",k.name]}),(0,t.jsxs)(j.DialogDescription,{children:["Regarding Service: ",k.serviceName," ",(0,t.jsx)("br",{}),"Email: ",(0,t.jsx)("a",{href:"mailto:".concat(k.email),className:"text-primary hover:underline",children:k.email}),k.phone&&" | Phone: ".concat(k.phone)," ",(0,t.jsx)("br",{}),"Date: ",k.createdAt?(0,S.GP)(new Date(k.createdAt),"PP p"):"N/A"," | Status: ",(0,t.jsx)(d.E,{variant:$(k.status),className:"capitalize ml-1",children:k.status})]})]}),(0,t.jsxs)("div",{className:"py-4 space-y-2",children:[(0,t.jsx)("h4",{className:"font-medium text-muted-foreground",children:"Message:"}),(0,t.jsx)(A.F,{className:"h-40 w-full rounded-md border p-3 bg-muted/30",children:(0,t.jsx)("p",{className:"text-sm text-foreground whitespace-pre-wrap",children:k.message})})]}),(0,t.jsx)(j.Es,{children:(0,t.jsx)(j.HM,{asChild:!0,children:(0,t.jsx)(i.$,{type:"button",variant:"outline",children:"Close"})})})]})}),k&&H&&(0,t.jsx)(j.Dialog,{open:H,onOpenChange:e=>{e||(z(!1),E(null),P(""))},children:(0,t.jsxs)(j.DialogContent,{className:"sm:max-w-2xl",children:[(0,t.jsxs)(j.DialogHeader,{children:[(0,t.jsxs)(j.DialogTitle,{children:["Reply to: ",k.name," (Inquiry for ",k.serviceName,")"]}),(0,t.jsxs)(j.DialogDescription,{children:["Email: ",(0,t.jsx)("a",{href:"mailto:".concat(k.email),className:"text-primary hover:underline",children:k.email})]})]}),(0,t.jsxs)("div",{className:"py-4 space-y-4",children:[(0,t.jsxs)(n.Zp,{className:"bg-muted/50 max-h-40 overflow-y-auto",children:[(0,t.jsx)(n.aR,{className:"pb-2 sticky top-0 bg-muted/50 z-10",children:(0,t.jsx)(n.ZB,{className:"text-sm font-medium text-muted-foreground",children:"Original Inquiry Message:"})}),(0,t.jsx)(n.Wu,{children:(0,t.jsx)("p",{className:"text-sm text-foreground whitespace-pre-wrap",children:k.message})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(D.J,{htmlFor:"inquiryReplyText",className:"text-base font-medium flex items-center mb-2",children:[(0,t.jsx)(x.A,{className:"mr-2 h-5 w-5 text-primary"})," Your Reply:"]}),(0,t.jsx)(R.T,{id:"inquiryReplyText",value:F,onChange:e=>P(e.target.value),placeholder:"Replying to ".concat(k.name,"..."),className:"min-h-[150px] text-sm",disabled:T})]})]}),(0,t.jsxs)(j.Es,{className:"sm:justify-between items-center",children:[(0,t.jsx)(j.HM,{asChild:!0,children:(0,t.jsx)(i.$,{type:"button",variant:"outline",disabled:T,children:"Cancel"})}),(0,t.jsxs)(i.$,{type:"button",onClick:Z,className:"button-primary",disabled:T||!F.trim(),children:[T?(0,t.jsx)(c.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Send Reply (Simulated)"]})]})]})})]})}},1555:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(157).A)("FileQuestion",[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]])},4063:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(157).A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},4165:(e,a,s)=>{"use strict";s.d(a,{Dialog:()=>d,DialogContent:()=>x,DialogDescription:()=>j,DialogHeader:()=>h,DialogTitle:()=>f,DialogTrigger:()=>c,Es:()=>p,HM:()=>m});var t=s(5155),r=s(2115),i=s(5452),n=s(5318),l=s(9434);let d=i.bL,c=i.l9,o=i.ZL,m=i.bm,u=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(i.hJ,{ref:a,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});u.displayName=i.hJ.displayName;let x=r.forwardRef((e,a)=>{let{className:s,children:r,...d}=e;return(0,t.jsxs)(o,{children:[(0,t.jsx)(u,{}),(0,t.jsxs)(i.UC,{ref:a,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...d,children:[r,(0,t.jsxs)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(n.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=i.UC.displayName;let h=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...s})};h.displayName="DialogHeader";let p=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s})};p.displayName="DialogFooter";let f=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(i.hE,{ref:a,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});f.displayName=i.hE.displayName;let j=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(i.VY,{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})});j.displayName=i.VY.displayName},5057:(e,a,s)=>{"use strict";s.d(a,{J:()=>c});var t=s(5155),r=s(2115),i=s(968),n=s(2085),l=s(9434);let d=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(i.b,{ref:a,className:(0,l.cn)(d(),s),...r})});c.displayName=i.b.displayName},6126:(e,a,s)=>{"use strict";s.d(a,{E:()=>l});var t=s(5155);s(2115);var r=s(2085),i=s(9434);let n=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:a,variant:s,...r}=e;return(0,t.jsx)("div",{className:(0,i.cn)(n({variant:s}),a),...r})}},6424:(e,a,s)=>{"use strict";s.d(a,{F:()=>l});var t=s(5155),r=s(2115),i=s(7655),n=s(9434);let l=r.forwardRef((e,a)=>{let{className:s,children:r,...l}=e;return(0,t.jsxs)(i.bL,{ref:a,className:(0,n.cn)("relative overflow-hidden",s),...l,children:[(0,t.jsx)(i.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,t.jsx)(d,{}),(0,t.jsx)(i.OK,{})]})});l.displayName=i.bL.displayName;let d=r.forwardRef((e,a)=>{let{className:s,orientation:r="vertical",...l}=e;return(0,t.jsx)(i.VM,{ref:a,orientation:r,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...l,children:(0,t.jsx)(i.lr,{className:"relative flex-1 rounded-full bg-border"})})});d.displayName=i.VM.displayName},8539:(e,a,s)=>{"use strict";s.d(a,{T:()=>n});var t=s(5155),r=s(2115),i=s(9434);let n=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm resize-none",s),ref:a,...r})});n.displayName="Textarea"},9354:(e,a,s)=>{Promise.resolve().then(s.bind(s,277))}},e=>{var a=a=>e(e.s=a);e.O(0,[4277,9086,9550,5152,4204,7934,6613,4776,8441,1684,7358],()=>a(9354)),_N_E=e.O()}]);